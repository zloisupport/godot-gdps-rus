# Coin Dash - создай свою первую 2D-игру

Этот первый проект научит вас создавать свою первую игру в движке Godot. Вы узнаете, как работает редактор Godot, как организовать проект и как создать небольшую 2D-игру, используя некоторые из наиболее часто используемых узлов Godot. Почему начать с 2D?

В двух словах, 3D-игры гораздо более сложны, чем 2D. Однако многие основные функции игрового движка, которые вам нужно знать, остаются такими же. Вам следует оставаться при 2D, пока у вас не будет хорошего понимания рабочего процесса Godot. В тот момент переход к 3D будет казаться намного проще. У вас будет возможность поработать в 3D в последующих главах этой книги.

Не пропускайте эту главу, даже если вы не являетесь полным новичком в разработке игр. Хотя многие концепции вам уже могут быть знакомы, этот проект представит вам возможности и дизайнерские парадигмы Godot - вещи, которые вам нужно знать в будущем.

Игра в этой главе называется Coin Dash. Ваш персонаж должен перемещаться по экрану, собирая как можно больше монет, гоняясь со временем. Когда вы закончите, игра будет выглядеть так:

![](/img/1-coin/1.png)

В этой главе мы рассмотрим следующие темы:
::list
  - Настройка нового проекта
  - Создание анимаций персонажа
  - Перемещение персонажа
  - Использование **Area2D** для обнаружения касания объектов
  - Использование узлов **Control** для отображения информации
  - Взаимодействие между игровыми объектами с использованием сигналов
::

## Технические требования

Загрузите игровые ресурсы по следующей ссылке ниже и разархивируйте их в новую папку проекта:


[**GitHub**](https://github.com/PacktPublishing/Godot-4-Game-Development-Projects-Second-Edition/tree/main/Downloads)

Вы также можете найти полный код этой главы на GitHub по адресу:
You can also find the complete code for this chapter on GitHub at:


[**GitHub**](https://github.com/PacktPublishing/Godot-4-Game-Development-Projects-Second-Edition/tree/main/Chapter02%20-%20Coin%20Dash)

## Настройка проекта:

Запустите Godot и в  Project Manager нажмите кнопку + New Project.
Сначала вам нужно создать папку для проекта. Введите "Coin Dash" в поле Project Name и нажмите "Create Folder".
Создание папки для вашего проекта важно, чтобы хранить все файлы проекта отдельно от других проектов на вашем компьютере. Затем вы можете нажать "Create & Edit", чтобы открыть новый проект в редакторе Godot.

![](/img/1-coin/2.png)

В этом проекте вы создадите три независимых сцены - персонаж игрока, монету и дисплей для отображения счета и времени - все они будут объединены в "главную" сцену игры (см. Главу 1). В более крупном проекте может быть полезно создавать отдельные папки для организации ресурсов и скриптов каждой сцены, но для этой относительно небольшой игры вы можете сохранить все сцены и скрипты в корневой папке, которая обозначается как res:// (res - это сокращение от ресурсов). Все ресурсы в вашем проекте будут расположены относительно папки res://. Вы можете увидеть файлы проекта в панели FileSystem в левом нижнем углу. Поскольку это новый проект, он будет пустым, за исключением файла с именем icon.svg, который представляет собой значок Godot.

Вы можете скачать ZIP-файл с графикой и звуками (вместе известными как ресурсы) для игры по следующей ссылке:  [**GitHub**](https://github.com/PacktPublishing/Godot-Engine-Game-Development-Projects-Second-Edition/tree/main/Downloads)

Распакуйте этот файл в новую папку проекта, которую вы создали.

![](/img/1-coin/3.png)

Например, изображения для монеты находятся в res://assets/coin/.

Поскольку эта игра будет в вертикальном режиме (больше по высоте, чем по ширине), начнем с настройки окна игры. Нажмите Project -> Project Settings в верхнем меню. Окно настроек выглядит следующим образом:

![](/img/1-coin/4.png)

Ищите раздел **Display** -> **Window** и установите **Viewport Width** в 480 и **Viewport Height** в 720, как показано на предыдущей картинке. Также в этом разделе, под Stretch, установите **Mode** в **canvas_items** и **Aspect** в **keep**. Это обеспечит масштабирование всего, если пользователь изменит размер окна игры, и предотвратит растягивание или искажение. Вы также можете снять флажок с **Resizable** в разделе **Size**, чтобы предотвратить изменение размера окна.

Поздравляю! Вы настроили свой новый проект и готовы приступить к созданию своей первой игры. В этой игре вы будете создавать объекты, движущиеся в 2D-пространстве, поэтому важно понимать, как объекты позиционируются и перемещаются с использованием 2D-координат. В следующем разделе вы узнаете, как это работает, и как применить это к вашей игре.

## Векторы и 2D-координатные системы

Этот раздел представляет собой очень краткий обзор 2D-координатных систем и векторной математики, так как она используется в разработке игр. Векторная математика - важный инструмент в разработке игр, поэтому, если вам нужно более широкое понимание этой темы, обратитесь к серии лекций по линейной алгебре на сайте Khan Academy (https://www.khanacademy.org/math/linear-algebra).

При работе в 2D используются декартовы координаты для определения местоположений в 2D-плоскости. Определенная позиция в 2D-пространстве записывается как пара значений, например, (4, 3), представляя позицию вдоль соответственно осей x и y. Любая позиция в 2D-плоскости может быть описана таким образом.

В 2D-пространстве Godot следует общей практике компьютерной графики, ориентируя ось x вправо и ось y вниз:

![](/img/1-coin/5.png)

Это может показаться странным, если вы новичок в компьютерной графике или разработке игр, потому что положительная ось y направлена вниз, а не вверх, как вы, вероятно, узнали на уроках математики. Однако такая ориентация очень распространена в приложениях компьютерной графики.


## Векторы

Вы также можете рассматривать позицию (4, 3) как смещение от точки (0, 0) или начала координат. Представьте себе стрелку, направленную от начала координат к этой точке:

![](/img/1-coin/6.png)

Эта стрелка представляет собой вектор. Он содержит много полезной информации, включая местоположение точки, ее расстояние или длину (м) и угол от оси x (θ). Более конкретно, этот тип вектора называется вектором положения - тем, который описывает положение в пространстве. Векторы также могут представлять движение, ускорение или любую другую величину, которая имеет размер и направление.

В Godot векторы имеют широкий спектр применений, и вы будете использовать их в каждом проекте в этой книге.

Теперь у вас должно быть понимание того, как работает 2D-координатное пространство, и как векторы могут помочь позиционировать и перемещать объекты. В следующем разделе вы создадите объект игрока и будете использовать это знание для управления его движением.


# Часть 1 – сцена игрока

Первая сцена, которую вы создадите, - это объект игрока. Одним из преимуществ создания отдельной сцены для игрока (и других объектов) является возможность тестирования его независимо, даже до создания других частей игры. Это разделение игровых объектов станет все более полезным по мере роста размеров и сложности ваших проектов. 

Хранение отдельных игровых объектов в отдельности облегчает их отладку, изменение и даже полное замещение без влияния на другие части игры. Это также означает, что ваш игрок может быть многократно используемым - вы можете вставить эту сцену игрока в совершенно другую игру, и она будет работать так же.

Сцена игрока должна выполнять следующие задачи:
::list

   - Отобразить вашего персонажа и его анимации

   - Откликаться на ввод пользователя, перемещая персонажа

   - Обнаруживать столкновения с другими игровыми объектами, такими как монеты или препятствия
::

## Cоздания сцены

Для создания сцены начните с нажатия кнопки **Add/Create a New Node** (сочетание клавиш **Ctrl + A)** и выбора узла **Area2D**. Затем щелкните по имени узла и измените его на **Player**. Нажмите **Scene -> Save Scene (Ctrl + S)**, чтобы сохранить сцену.

![](/img/1-coin/7.png)

Взгляните на вкладку FileSystem и обратите внимание, что теперь там появился файл **player.tscn**. Всякий раз, когда вы сохраняете сцену в Godot, она использует расширение **.tscn** – это формат файла для сцен Godot. "t" в названии означает "text" (текст), потому что это текстовые файлы. Если вас интересует, можете посмотреть его во внешнем текстовом редакторе, но лучше не редактировать его вручную, иначе есть риск случайного повреждения файла.

Теперь вы создали корневой или верхний узел сцены. Этот узел определяет общую функциональность объекта. Мы выбрали **Area2D**, потому что это 2D-узел, он может перемещаться в 2D-пространстве и обнаруживать перекрытия с другими узлами, так что мы сможем обнаруживать монеты и другие игровые объекты. Выбор узла для конкретного игрового объекта - это ваше первое важное решение при проектировании игровых объектов.

Прежде чем добавлять дочерние узлы, хорошей идеей будет убедиться, что вы не сможете их случайно перемещать или изменять размер, кликнув по ним. Выберите узел Player и наведите мышь на значок рядом с замком, Group Selected Node(s):
![](/img/1-coin/8.png)